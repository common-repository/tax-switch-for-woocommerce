(()=>{"use strict";var e,t={458:()=>{const e=window.wp.blocks,t=window.React,s=window.wp.i18n,c=window.wp.blockEditor,i=window.wp.components,a=window.wp.element,l=window.wp.data,r="wdevs_tax_switch_is_switched",n={setIsSwitched:e=>({type:"SET_IS_SWITCHED",value:e}),saveIsSwitched:e=>(localStorage.setItem(r,JSON.stringify(e)),{type:"SET_IS_SWITCHED",value:e})};let o;o=(0,l.select)("wdevs-tax-switch/store")?(0,l.select)("wdevs-tax-switch/store"):(0,l.registerStore)("wdevs-tax-switch/store",{reducer:(e=(()=>{const e=localStorage.getItem(r);return{isSwitched:!!e&&JSON.parse(e)}})(),t)=>"SET_IS_SWITCHED"===t.type?{...e,isSwitched:t.value}:e,actions:n,selectors:{getIsSwitched:e=>e.isSwitched}});const w=class{static togglePriceClasses(e,t){const s=this.displayIncludingVat(e,t);document.querySelectorAll(".wts-price-wrapper").forEach((e=>{const t=e.querySelector(":scope > .wts-price-incl"),c=e.querySelector(":scope > .wts-price-excl");s?(t.classList.remove("wts-inactive"),t.classList.add("wts-active"),c.classList.remove("wts-active"),c.classList.add("wts-inactive")):(t.classList.remove("wts-active"),t.classList.add("wts-inactive"),c.classList.remove("wts-inactive"),c.classList.add("wts-active"))}))}static displayIncludingVat(e,t){return null==t&&(t=(0,l.select)("wdevs-tax-switch/store").getIsSwitched()),"incl"===e&&!t||"excl"===e&&t}static parseBooleanValue(e){return!!e&&JSON.parse(e)}static setPriceClasses(e){return this.togglePriceClasses(e,(0,l.select)("wdevs-tax-switch/store").getIsSwitched())}static getVatTexts(e=null){const t=document.createTextNode(" ").nodeValue;let s,c;if(e){const i=jQuery(e);if(s=i.find(".wts-price-incl .wts-vat-text").first(),c=i.find(".wts-price-excl .wts-vat-text").first(),s.length||c.length)return{including:s.length?t+s.clone().prop("outerHTML"):"",excluding:c.length?t+c.clone().prop("outerHTML"):""}}return s=jQuery(".wts-price-wrapper .wts-price-incl .wts-vat-text").first(),c=jQuery(".wts-price-wrapper .wts-price-excl .wts-vat-text").first(),{including:s.length?t+s.clone().prop("outerHTML"):"",excluding:c.length?t+c.clone().prop("outerHTML"):""}}};class h extends a.Component{constructor(e){super(e);const{readOnly:t,isSwitched:s}=this.getInitialState(e);this.state={readOnly:t,isSwitched:s},this.handleChange=this.handleChange.bind(this),this.unsubscribe=(0,l.subscribe)((()=>{const e=(0,l.select)("wdevs-tax-switch/store").getIsSwitched();this.state.isSwitched!==e&&this.setState({isSwitched:e})}))}getInitialState(e){const t=w.parseBooleanValue(e.readOnly),s=e.originalTaxDisplay||"incl";let c;return c=t?!("incl"===s):(0,l.select)("wdevs-tax-switch/store").getIsSwitched(),{readOnly:t,isSwitched:c}}componentWillUnmount(){this.unsubscribe&&this.unsubscribe()}handleChange(){const e=!this.state.isSwitched;this.setState({isSwitched:e},(()=>{this.state.readOnly?(0,l.dispatch)("wdevs-tax-switch/store").setIsSwitched(e):(0,l.dispatch)("wdevs-tax-switch/store").saveIsSwitched(e),this.togglePriceClasses()}))}displayIncludingVat(){const{originalTaxDisplay:e="incl"}=this.props,{isSwitched:t}=this.state;return w.displayIncludingVat(e,t)}togglePriceClasses(){const{originalTaxDisplay:e="incl"}=this.props,{isSwitched:t}=this.state;return w.togglePriceClasses(e,t)}getCurrentLabel(){const{switchLabelIncl:e,switchLabelExcl:t}=this.props;return this.displayIncludingVat()?e||"":t||""}render(){const{switchColor:e,switchColorChecked:s,switchBackgroundColor:c,switchBackgroundColorChecked:i,switchLabelIncl:a,switchLabelExcl:l}=this.props,r=this.displayIncludingVat(),n=a||l;return(0,t.createElement)("div",{className:"wdevs-tax-switch",style:{"--wts-color":e,"--wts-color-checked":s,"--wts-bg-color":c,"--wts-bg-color-checked":i}},(0,t.createElement)("label",{className:"wdevs-tax-switch-label"},(0,t.createElement)("input",{type:"checkbox",name:"wdevs-tax-switch-checkbox",onChange:this.handleChange,checked:r,className:"wdevs-tax-switch-checkbox"}),(0,t.createElement)("span",{className:"wdevs-tax-switch-slider"})),n&&(0,t.createElement)("span",{className:"wdevs-tax-switch-label-text",onClick:this.handleChange},this.getCurrentLabel()))}}const d=h,u=JSON.parse('{"UU":"wdevs/tax-switch"}');(0,e.registerBlockType)(u.UU,{edit:function({attributes:e,setAttributes:a}){const{switchColor:l,switchColorChecked:r,switchBackgroundColor:n,switchBackgroundColorChecked:o,switchLabelIncl:w,switchLabelExcl:h}=e,{originalTaxDisplay:u}=window.wtsEditorObject||{originalTaxDisplay:"incl"};return(0,t.createElement)("div",{...(0,c.useBlockProps)()},(0,t.createElement)(c.InspectorControls,null,(0,t.createElement)(c.PanelColorSettings,{title:(0,s.__)("Switch colors","wdevs-tax-switch"),initialOpen:!0,colorSettings:[{value:l,onChange:e=>a({switchColor:e}),label:(0,s.__)("Switch color","wdevs-tax-switch")},{value:r,onChange:e=>a({switchColorChecked:e}),label:(0,s.__)("Switch color checked","wdevs-tax-switch")},{value:n,onChange:e=>a({switchBackgroundColor:e}),label:(0,s.__)("Background color","wdevs-tax-switch")},{value:o,onChange:e=>a({switchBackgroundColorChecked:e}),label:(0,s.__)("Background color checked","wdevs-tax-switch")}]}),(0,t.createElement)(i.PanelBody,{title:(0,s.__)("Switch Labels","wdevs-tax-switch"),initialOpen:!0},(0,t.createElement)(i.TextControl,{label:(0,s.__)("Including VAT Label","wdevs-tax-switch"),value:w,onChange:e=>a({switchLabelIncl:e})}),(0,t.createElement)(i.TextControl,{label:(0,s.__)("Excluding VAT Label","wdevs-tax-switch"),value:h,onChange:e=>a({switchLabelExcl:e})}))),(0,t.createElement)(d,{...e,readOnly:!0,originalTaxDisplay:u}))},save:function({attributes:e}){return(0,t.createElement)("div",{...c.useBlockProps.save()})}})}},s={};function c(e){var i=s[e];if(void 0!==i)return i.exports;var a=s[e]={exports:{}};return t[e](a,a.exports,c),a.exports}c.m=t,e=[],c.O=(t,s,i,a)=>{if(!s){var l=1/0;for(w=0;w<e.length;w++){s=e[w][0],i=e[w][1],a=e[w][2];for(var r=!0,n=0;n<s.length;n++)(!1&a||l>=a)&&Object.keys(c.O).every((e=>c.O[e](s[n])))?s.splice(n--,1):(r=!1,a<l&&(l=a));if(r){e.splice(w--,1);var o=i();void 0!==o&&(t=o)}}return t}a=a||0;for(var w=e.length;w>0&&e[w-1][2]>a;w--)e[w]=e[w-1];e[w]=[s,i,a]},c.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={57:0,350:0};c.O.j=t=>0===e[t];var t=(t,s)=>{var i,a,l=s[0],r=s[1],n=s[2],o=0;if(l.some((t=>0!==e[t]))){for(i in r)c.o(r,i)&&(c.m[i]=r[i]);if(n)var w=n(c)}for(t&&t(s);o<l.length;o++)a=l[o],c.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return c.O(w)},s=self.webpackChunkwdevs_tax_switch=self.webpackChunkwdevs_tax_switch||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))})();var i=c.O(void 0,[350],(()=>c(458)));i=c.O(i)})();