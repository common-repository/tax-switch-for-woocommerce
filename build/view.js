(()=>{"use strict";var e={n:t=>{var s=t&&t.__esModule?()=>t.default:()=>t;return e.d(s,{a:s}),s},d:(t,s)=>{for(var i in s)e.o(s,i)&&!e.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:s[i]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const t=window.React,s=window.wp.element,i=window.wp.data,c="wdevs_tax_switch_is_switched",a={setIsSwitched:e=>({type:"SET_IS_SWITCHED",value:e}),saveIsSwitched:e=>(localStorage.setItem(c,JSON.stringify(e)),{type:"SET_IS_SWITCHED",value:e})};let n;n=(0,i.select)("wdevs-tax-switch/store")?(0,i.select)("wdevs-tax-switch/store"):(0,i.registerStore)("wdevs-tax-switch/store",{reducer:(e=(()=>{const e=localStorage.getItem(c);return{isSwitched:!!e&&JSON.parse(e)}})(),t)=>"SET_IS_SWITCHED"===t.type?{...e,isSwitched:t.value}:e,actions:a,selectors:{getIsSwitched:e=>e.isSwitched}});const l=class{static togglePriceClasses(e,t){const s=this.displayIncludingVat(e,t);document.querySelectorAll(".wts-price-wrapper").forEach((e=>{const t=e.querySelector(":scope > .wts-price-incl"),i=e.querySelector(":scope > .wts-price-excl");s?(t.classList.remove("wts-inactive"),t.classList.add("wts-active"),i.classList.remove("wts-active"),i.classList.add("wts-inactive")):(t.classList.remove("wts-active"),t.classList.add("wts-inactive"),i.classList.remove("wts-inactive"),i.classList.add("wts-active"))}))}static displayIncludingVat(e,t){return null==t&&(t=(0,i.select)("wdevs-tax-switch/store").getIsSwitched()),"incl"===e&&!t||"excl"===e&&t}static parseBooleanValue(e){return!!e&&JSON.parse(e)}static setPriceClasses(e){return this.togglePriceClasses(e,(0,i.select)("wdevs-tax-switch/store").getIsSwitched())}static getVatTexts(e=null){const t=document.createTextNode(" ").nodeValue;let s,i;if(e){const c=jQuery(e);if(s=c.find(".wts-price-incl .wts-vat-text").first(),i=c.find(".wts-price-excl .wts-vat-text").first(),s.length||i.length)return{including:s.length?t+s.clone().prop("outerHTML"):"",excluding:i.length?t+i.clone().prop("outerHTML"):""}}return s=jQuery(".wts-price-wrapper .wts-price-incl .wts-vat-text").first(),i=jQuery(".wts-price-wrapper .wts-price-excl .wts-vat-text").first(),{including:s.length?t+s.clone().prop("outerHTML"):"",excluding:i.length?t+i.clone().prop("outerHTML"):""}}};class r extends s.Component{constructor(e){super(e);const{readOnly:t,isSwitched:s}=this.getInitialState(e);this.state={readOnly:t,isSwitched:s},this.handleChange=this.handleChange.bind(this),this.unsubscribe=(0,i.subscribe)((()=>{const e=(0,i.select)("wdevs-tax-switch/store").getIsSwitched();this.state.isSwitched!==e&&this.setState({isSwitched:e})}))}getInitialState(e){const t=l.parseBooleanValue(e.readOnly),s=e.originalTaxDisplay||"incl";let c;return c=t?!("incl"===s):(0,i.select)("wdevs-tax-switch/store").getIsSwitched(),{readOnly:t,isSwitched:c}}componentWillUnmount(){this.unsubscribe&&this.unsubscribe()}handleChange(){const e=!this.state.isSwitched;this.setState({isSwitched:e},(()=>{this.state.readOnly?(0,i.dispatch)("wdevs-tax-switch/store").setIsSwitched(e):(0,i.dispatch)("wdevs-tax-switch/store").saveIsSwitched(e),this.togglePriceClasses()}))}displayIncludingVat(){const{originalTaxDisplay:e="incl"}=this.props,{isSwitched:t}=this.state;return l.displayIncludingVat(e,t)}togglePriceClasses(){const{originalTaxDisplay:e="incl"}=this.props,{isSwitched:t}=this.state;return l.togglePriceClasses(e,t)}getCurrentLabel(){const{switchLabelIncl:e,switchLabelExcl:t}=this.props;return this.displayIncludingVat()?e||"":t||""}render(){const{switchColor:e,switchColorChecked:s,switchBackgroundColor:i,switchBackgroundColorChecked:c,switchLabelIncl:a,switchLabelExcl:n}=this.props,l=this.displayIncludingVat(),r=a||n;return(0,t.createElement)("div",{className:"wdevs-tax-switch",style:{"--wts-color":e,"--wts-color-checked":s,"--wts-bg-color":i,"--wts-bg-color-checked":c}},(0,t.createElement)("label",{className:"wdevs-tax-switch-label"},(0,t.createElement)("input",{type:"checkbox",name:"wdevs-tax-switch-checkbox",onChange:this.handleChange,checked:l,className:"wdevs-tax-switch-checkbox"}),(0,t.createElement)("span",{className:"wdevs-tax-switch-slider"})),r&&(0,t.createElement)("span",{className:"wdevs-tax-switch-label-text",onClick:this.handleChange},this.getCurrentLabel()))}}const o=r,d=window.jQuery;var w=e.n(d);const h=class{static initialize(e){this.registerWooCommerceEvents(e)}static registerWooCommerceEvents(e){w()(".variations_form").on("found_variation",(function(){setTimeout((function(){l.setPriceClasses(e)}),10)})),w()(".variations_form").on("reset_data",(function(){setTimeout((function(){l.setPriceClasses(e)}),10)})),w()(document).ajaxSuccess((function(t,s,i){["get_variable_product_bulk_table"].some((e=>i.data.includes(e)))&&setTimeout((function(){l.setPriceClasses(e)}),10)}))}};window.addEventListener("DOMContentLoaded",(()=>{const e=document.querySelectorAll(".wp-block-wdevs-tax-switch");if(e.length>0){const i=window.wtsViewObject||{originalTaxDisplay:"incl"};(e=>{l.setPriceClasses(e.originalTaxDisplay),h.initialize(e.originalTaxDisplay)})(i),e.forEach((e=>{e&&((e,i)=>{const c={...e.dataset,...i};(0,s.render)((0,t.createElement)(s.Suspense,{fallback:(0,t.createElement)("div",{className:"wp-block-placeholder"})},(0,t.createElement)(o,{...c})),e)})(e,i)}))}}))})();